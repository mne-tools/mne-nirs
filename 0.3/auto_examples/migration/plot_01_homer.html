
<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

    <title>Migrating from Homer to MNE &#8212; MNE-NIRS 0.3.0 documentation</title>
  <script>
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "light";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../../_static/styles/theme.css?digest=9b1a4fa89bdd0e95b23b" rel="stylesheet">
<link href="../../_static/styles/pydata-sphinx-theme.css?digest=9b1a4fa89bdd0e95b23b" rel="stylesheet">

  
  <link rel="stylesheet"
    href="../../_static/vendor/fontawesome/6.1.2/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../_static/vendor/fontawesome/6.1.2/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../_static/vendor/fontawesome/6.1.2/webfonts/fa-brands-400.woff2">

    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/font-awesome.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/sg_gallery.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/sg_gallery-binder.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/sg_gallery-dataframe.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/sg_gallery-rendered-html.css" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../../_static/scripts/pydata-sphinx-theme.js?digest=9b1a4fa89bdd0e95b23b">

    <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../_static/js/copybutton.js"></script>
    <script async="async" src="https://www.google-analytics.com/analytics.js"></script>
    <script>
                    window.ga = window.ga || function () {
                        (ga.q = ga.q || []).push(arguments) };
                    ga.l = +new Date;
                    ga('create', 'UA-188272121-1', 'auto');
                    ga('set', 'anonymizeIp', true);
                    ga('send', 'pageview');
                </script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'auto_examples/migration/plot_01_homer';</script>
    <script>
        DOCUMENTATION_OPTIONS.theme_switcher_json_url = 'https://mne.tools/mne-nirs/dev/_static/versions.json';
        DOCUMENTATION_OPTIONS.theme_switcher_version_match = '0.3.0';
        </script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Migrating from nirs-toolbox to MNE" href="plot_02_nirstoolbox.html" />
    <link rel="prev" title="Migrating from other software packages" href="index.html" />
    <link rel="canonical" href="https://mne.tools/mne-nirs/stable/index.html" />
    
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="docsearch:language" content="en">

  </head>
  
  
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="180" data-default-mode="">

  
  <input type="checkbox" class="sidebar-toggle" name="__primary" id="__primary">
  <label class="overlay overlay-primary" for="__primary"></label>

  
  <input type="checkbox" class="sidebar-toggle" name="__secondary" id="__secondary">
  <label class="overlay overlay-secondary" for="__secondary"></label>

  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
      
<form class="bd-search d-flex align-items-center" action="../../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search the docs ..." aria-label="Search the docs ..." autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false">
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form>
    </div>
  </div>

  
  <nav class="bd-header navbar navbar-expand-lg bd-navbar" id="navbar-main"><div class="bd-header__inner bd-page-width">
  <label class="sidebar-toggle primary-toggle" for="__primary">
      <span class="fas fa-bars"></span>
  </label>
  <div id="navbar-start">
    
    
  


<a class="navbar-brand logo" href="../../index.html">

  
  
  
  
  
  
  

  
  
    <p class="title logo__title">MNE-NIRS 0.3.0 documentation</p>
  
</a>
    
  </div>

  
  <div class="col-lg-9 navbar-header-items">
    <div id="navbar-center" class="mr-auto">
      
      <div class="navbar-center-item">
        <nav class="navbar-nav">
    <p class="sidebar-header-items__title" role="heading" aria-level="1" aria-label="Site Navigation">
        Site Navigation
    </p>
    <ul id="navbar-main-elements" class="navbar-nav">
        
                <li class="nav-item current active">
                    <a class="nav-link" href="../index.html">
                        Examples
                    </a>
                </li>
                

                <li class="nav-item">
                    <a class="nav-link" href="../../api.html">
                        API
                    </a>
                </li>
                

                <li class="nav-item">
                    <a class="nav-link" href="../../changelog.html">
                        Changelog
                    </a>
                </li>
                
    </ul>
</nav>
      </div>
      
    </div>

    <div id="navbar-end">
      <div class="navbar-end-item navbar-end__search-button-container">
        
<button class="btn btn-sm navbar-btn search-button search-button__button" title="Search">
  <i class="fas fa-search"></i>
</button>
      </div>
      
      <div class="navbar-end-item">
        <div class="version-switcher__container dropdown">
    <button type="button" class="version-switcher__button btn btn-sm navbar-btn dropdown-toggle" data-toggle="dropdown">
        0.3.0  <!-- this text may get changed later by javascript -->
        <span class="caret"></span>
    </button>
    <div class="version-switcher__menu dropdown-menu list-group-flush py-0">
    <!-- dropdown will be populated by javascript on page load -->
    </div>
</div>
      </div>
      
      <div class="navbar-end-item">
        <ul id="navbar-icon-links" class="navbar-nav" aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          <a href="https://github.com/mne-tools/mne-nirs" title="GitHub" class="nav-link" rel="noopener" target="_blank"><span><i class="fab fa-github-square"></i></span>
            <label class="sr-only">GitHub</label></a>
        </li>
      </ul>
      </div>
      
    </div>
  </div>


  
  <div class="search-button-container--mobile">
<button class="btn btn-sm navbar-btn search-button search-button__button" title="Search">
  <i class="fas fa-search"></i>
</button>
  </div>

  
  <label class="sidebar-toggle secondary-toggle" for="__secondary">
      <span class="fas fa-outdent"></span>
  </label>
  

</div>
  </nav>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      <div class="bd-sidebar-primary bd-sidebar">
        
  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
      <div class="sidebar-header-items__center">
      
      <div class="navbar-center-item">
        <nav class="navbar-nav">
    <p class="sidebar-header-items__title" role="heading" aria-level="1" aria-label="Site Navigation">
        Site Navigation
    </p>
    <ul id="navbar-main-elements" class="navbar-nav">
        
                <li class="nav-item current active">
                    <a class="nav-link" href="../index.html">
                        Examples
                    </a>
                </li>
                

                <li class="nav-item">
                    <a class="nav-link" href="../../api.html">
                        API
                    </a>
                </li>
                

                <li class="nav-item">
                    <a class="nav-link" href="../../changelog.html">
                        Changelog
                    </a>
                </li>
                
    </ul>
</nav>
      </div>
      
      </div>
    

    
    
    <div class="sidebar-header-items__end">
      
      <div class="navbar-end-item">
        <div class="version-switcher__container dropdown">
    <button type="button" class="version-switcher__button btn btn-sm navbar-btn dropdown-toggle" data-toggle="dropdown">
        0.3.0  <!-- this text may get changed later by javascript -->
        <span class="caret"></span>
    </button>
    <div class="version-switcher__menu dropdown-menu list-group-flush py-0">
    <!-- dropdown will be populated by javascript on page load -->
    </div>
</div>
      </div>
      
      <div class="navbar-end-item">
        <ul id="navbar-icon-links" class="navbar-nav" aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          <a href="https://github.com/mne-tools/mne-nirs" title="GitHub" class="nav-link" rel="noopener" target="_blank"><span><i class="fab fa-github-square"></i></span>
            <label class="sr-only">GitHub</label></a>
        </li>
      </ul>
      </div>
      
    </div>
    
  </div>

  
  <div class="sidebar-start-items sidebar-primary__section">
    <div class="sidebar-start-items__item"><nav class="bd-links" id="bd-docs-nav" aria-label="Section navigation">
  <p class="bd-links__title" role="heading" aria-level="1">
    Section Navigation
  </p>
  <div class="bd-toc-item navbar-nav">
    <ul class="current nav bd-sidenav">
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../general/index.html">
   Analysis examples
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/>
  <label class="toctree-toggle" for="toctree-checkbox-1">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../general/plot_01_data_io.html">
     Importing Data From fNIRS Devices
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../general/plot_05_datasets.html">
     Example Datasets
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../general/plot_06_gowerlabs.html">
     Read Gowerlabs LUMO data
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../general/plot_10_hrf_simulation.html">
     GLM Analysis (Simulated)
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../general/plot_11_hrf_measured.html">
     GLM Analysis (Measured)
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../general/plot_12_group_glm.html">
     Group Level GLM Analysis
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../general/plot_13_fir_glm.html">
     GLM FIR Analysis
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../general/plot_14_glm_components.html">
     GLM and Design Matrix Parameters
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../general/plot_15_waveform.html">
     Waveform Averaging Analysis
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../general/plot_16_waveform_group.html">
     Group Level Waveform Analysis
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../general/plot_19_snirf.html">
     SNIRF Support in MNE
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../general/plot_20_enhance.html">
     Signal Enhancement Techniques
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../general/plot_21_artifacts.html">
     Artifact Correction Techniques
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../general/plot_22_quality.html">
     Signal Quality Evaluation
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../general/plot_30_frequency.html">
     Frequency and Filter Commentary
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../general/plot_40_mayer.html">
     Mayer Wave Parametrisation
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../general/plot_50_decoding.html">
     Decoding Analysis
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../general/plot_70_visualise_brain.html">
     Utilising Anatomical Information
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../general/plot_80_save_read_glm.html">
     Save and load GLM results
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../general/plot_99_bad.html">
     Importance of Controls and Parameter Selection
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 current active has-children">
  <a class="reference internal" href="index.html">
   Migrating from other software packages
  </a>
  <input checked="" class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" type="checkbox"/>
  <label class="toctree-toggle" for="toctree-checkbox-2">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul class="current">
   <li class="toctree-l2 current active">
    <a class="current reference internal" href="#">
     Migrating from Homer to MNE
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="plot_02_nirstoolbox.html">
     Migrating from nirs-toolbox to MNE
    </a>
   </li>
  </ul>
 </li>
</ul>

  </div>
</nav>
    </div>
  </div>
  

  
  <div class="sidebar-end-items sidebar-primary__section">
    <div class="sidebar-end-items__item">
    </div>
  </div>

      </div>
      <main class="bd-main">
        
        
        <div class="bd-content">
          <div class="bd-article-container">
            
            <div class="bd-header-article">
                
            </div>
            
            
            <article class="bd-article" role="main">
              
  <div class="sphx-glr-download-link-note admonition note">
<p class="admonition-title">Note</p>
<p>Click <a class="reference internal" href="#sphx-glr-download-auto-examples-migration-plot-01-homer-py"><span class="std std-ref">here</span></a>
to download the full example code or to run this example in your browser via Binder</p>
</div>
<section class="sphx-glr-example-title" id="migrating-from-homer-to-mne">
<span id="tut-migration-homer"></span><span id="sphx-glr-auto-examples-migration-plot-01-homer-py"></span><h1>Migrating from Homer to MNE<a class="headerlink" href="#migrating-from-homer-to-mne" title="Permalink to this heading">#</a></h1>
<p>This tutorial will demonstrate how to do convert a basic Homer script to MNE
and highlight differences and common issues you may encounter.</p>
<p>Homer2 is a MATLAB based software analysis package. <a class="reference external" href="https://homer-fnirs.org/">https://homer-fnirs.org/</a></p>
<p>Homer3 is also a MATLAB based analysis package. <a class="reference external" href="https://github.com/BUNPC/Homer3">https://github.com/BUNPC/Homer3</a></p>
</section>
<section id="basic-homer2-script-to-be-reproduced-in-mne">
<h1>Basic Homer2 script to be reproduced in MNE<a class="headerlink" href="#basic-homer2-script-to-be-reproduced-in-mne" title="Permalink to this heading">#</a></h1>
<p>Below is a common example analysis performed in Homer.
The NIRx data is converted to .nirs format.
Then the intensity signal is convert to optical density,
motion corrected using TDDR, and converted to haemoglobin concentration.</p>
<div class="highlight-matlab notranslate"><div class="highlight"><pre><span></span><span class="n">HomerOfflineConverter</span><span class="p">(</span><span class="s">&#39;~/mne_data/MNE-fNIRS-motor-data/Participant-1&#39;</span><span class="p">);</span><span class="w"></span>
<span class="nb">load</span><span class="p">(</span><span class="s">&#39;file.nirs&#39;</span><span class="p">,</span><span class="w"> </span><span class="s">&#39;-mat&#39;</span><span class="p">);</span><span class="w"></span>
<span class="n">fs</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="mf">7.8125</span><span class="p">;</span><span class="w"></span>
<span class="n">dRange</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="p">[</span><span class="mf">0.07</span><span class="w"> </span><span class="mi">3</span><span class="p">];</span><span class="w"></span>
<span class="n">SNRthresh</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="mi">7</span><span class="p">;</span><span class="w"></span>
<span class="n">SDrange</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="p">[</span><span class="mi">0</span><span class="w"> </span><span class="mi">45</span><span class="p">];</span><span class="w"></span>
<span class="nb">reset</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"></span>
<span class="n">tIncMan</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="nb">ones</span><span class="p">(</span><span class="nb">size</span><span class="p">(</span><span class="n">s</span><span class="p">,</span><span class="mi">1</span><span class="p">),</span><span class="mi">1</span><span class="p">);</span><span class="w"></span>
<span class="n">dod</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">hmrIntensity2OD</span><span class="p">(</span><span class="n">d</span><span class="p">);</span><span class="w"></span>
<span class="n">SD</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">enPruneChannels</span><span class="p">(</span><span class="n">d</span><span class="p">,</span><span class="n">SD</span><span class="p">,</span><span class="n">tIncMan</span><span class="p">,</span><span class="n">dRange</span><span class="p">,</span><span class="n">SNRthresh</span><span class="p">,</span><span class="n">SDrange</span><span class="p">,</span><span class="nb">reset</span><span class="p">);</span><span class="w"></span>
<span class="n">tddr</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">hmrMotionCorrectTDDR</span><span class="p">(</span><span class="n">dod</span><span class="p">,</span><span class="n">SD</span><span class="p">,</span><span class="n">fs</span><span class="p">);</span><span class="w"></span>
<span class="n">ppf</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="p">[</span><span class="mi">6</span><span class="w"> </span><span class="mi">6</span><span class="p">];</span><span class="w"></span>
<span class="n">dc</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">hmrOD2Conc</span><span class="p">(</span><span class="n">tddr</span><span class="p">,</span><span class="n">SD</span><span class="p">,</span><span class="n">ppf</span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
</section>
<section id="mne-equivalent-of-homer-script">
<h1>MNE equivalent of Homer script<a class="headerlink" href="#mne-equivalent-of-homer-script" title="Permalink to this heading">#</a></h1>
<p>First the necessary libraries and functions are imported.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># Authors: Robert Luke &lt;mail@robertluke.net&gt;</span>
<span class="c1">#</span>
<span class="c1"># License: BSD (3-clause)</span>

<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">mne</span>

<span class="kn">from</span> <span class="nn">mne.io</span> <span class="kn">import</span> <a href="https://mne.tools/stable/generated/mne.io.read_raw_nirx.html#mne.io.read_raw_nirx" title="mne.io.read_raw_nirx" class="sphx-glr-backref-module-mne-io sphx-glr-backref-type-py-function"><span class="n">read_raw_nirx</span></a>
<span class="kn">from</span> <span class="nn">mne.preprocessing.nirs</span> <span class="kn">import</span> <span class="p">(</span><a href="https://mne.tools/stable/generated/mne.preprocessing.nirs.optical_density.html#mne.preprocessing.nirs.optical_density" title="mne.preprocessing.nirs.optical_density" class="sphx-glr-backref-module-mne-preprocessing-nirs sphx-glr-backref-type-py-function"><span class="n">optical_density</span></a><span class="p">,</span> <a href="https://mne.tools/stable/generated/mne.preprocessing.nirs.beer_lambert_law.html#mne.preprocessing.nirs.beer_lambert_law" title="mne.preprocessing.nirs.beer_lambert_law" class="sphx-glr-backref-module-mne-preprocessing-nirs sphx-glr-backref-type-py-function"><span class="n">beer_lambert_law</span></a><span class="p">,</span>
                                    <a href="https://mne.tools/stable/generated/mne.preprocessing.nirs.temporal_derivative_distribution_repair.html#mne.preprocessing.nirs.temporal_derivative_distribution_repair" title="mne.preprocessing.nirs.temporal_derivative_distribution_repair" class="sphx-glr-backref-module-mne-preprocessing-nirs sphx-glr-backref-type-py-function"><span class="n">temporal_derivative_distribution_repair</span></a><span class="p">)</span>
</pre></div>
</div>
<section id="convert-to-optical-density-and-motion-correct">
<h2>Convert to optical density and motion correct<a class="headerlink" href="#convert-to-optical-density-and-motion-correct" title="Permalink to this heading">#</a></h2>
<p>First we load the data which simply involves pointing the load function
to the correct directory.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># First we obtain the path to the data</span>
<a href="https://docs.python.org/3/library/pathlib.html#pathlib.PosixPath" title="pathlib.PosixPath" class="sphx-glr-backref-module-pathlib sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">fnirs_data_folder</span></a> <span class="o">=</span> <a href="https://mne.tools/stable/generated/mne.datasets.fnirs_motor.data_path.html#mne.datasets.fnirs_motor.data_path" title="mne.datasets.fnirs_motor.data_path" class="sphx-glr-backref-module-mne-datasets-fnirs_motor sphx-glr-backref-type-py-function"><span class="n">mne</span><span class="o">.</span><span class="n">datasets</span><span class="o">.</span><span class="n">fnirs_motor</span><span class="o">.</span><span class="n">data_path</span></a><span class="p">()</span>
<a href="https://docs.python.org/3/library/stdtypes.html#str" title="builtins.str" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">fnirs_raw_dir</span></a> <span class="o">=</span> <a href="https://docs.python.org/3/library/os.path.html#os.path.join" title="os.path.join" class="sphx-glr-backref-module-os-path sphx-glr-backref-type-py-function"><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span></a><span class="p">(</span><a href="https://docs.python.org/3/library/pathlib.html#pathlib.PosixPath" title="pathlib.PosixPath" class="sphx-glr-backref-module-pathlib sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">fnirs_data_folder</span></a><span class="p">,</span> <span class="s1">&#39;Participant-1&#39;</span><span class="p">)</span>

<span class="c1"># Next we read the data</span>
<span class="n">raw_intensity</span> <span class="o">=</span> <a href="https://mne.tools/stable/generated/mne.io.read_raw_nirx.html#mne.io.read_raw_nirx" title="mne.io.read_raw_nirx" class="sphx-glr-backref-module-mne-io sphx-glr-backref-type-py-function"><span class="n">read_raw_nirx</span></a><span class="p">(</span><a href="https://docs.python.org/3/library/stdtypes.html#str" title="builtins.str" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">fnirs_raw_dir</span></a><span class="p">)</span><span class="o">.</span><span class="n">load_data</span><span class="p">()</span>
</pre></div>
</div>
</section>
<section id="convert-signal-to-optical-density-and-apply-tddr">
<h2>Convert signal to optical density and apply TDDR<a class="headerlink" href="#convert-signal-to-optical-density-and-apply-tddr" title="Permalink to this heading">#</a></h2>
<p>As with Homer we can convert the intensity data to optical density and
apply motion correction using the TDDR method.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">raw_od</span> <span class="o">=</span> <a href="https://mne.tools/stable/generated/mne.preprocessing.nirs.optical_density.html#mne.preprocessing.nirs.optical_density" title="mne.preprocessing.nirs.optical_density" class="sphx-glr-backref-module-mne-preprocessing-nirs sphx-glr-backref-type-py-function"><span class="n">optical_density</span></a><span class="p">(</span><span class="n">raw_intensity</span><span class="p">)</span>
<span class="n">corrected_tddr</span> <span class="o">=</span> <a href="https://mne.tools/stable/generated/mne.preprocessing.nirs.temporal_derivative_distribution_repair.html#mne.preprocessing.nirs.temporal_derivative_distribution_repair" title="mne.preprocessing.nirs.temporal_derivative_distribution_repair" class="sphx-glr-backref-module-mne-preprocessing-nirs sphx-glr-backref-type-py-function"><span class="n">temporal_derivative_distribution_repair</span></a><span class="p">(</span><span class="n">raw_od</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="convert-to-haemoglobin-concentration">
<h2>Convert to haemoglobin concentration<a class="headerlink" href="#convert-to-haemoglobin-concentration" title="Permalink to this heading">#</a></h2>
<p>Next we convert the signal to changes in haemoglobin concentration.
MNE uses a different default value for the partial pathlength factor (ppf),
Homer uses a default value of ppf=6, whereas MNE uses ppf=0.1,
To exactly match the results from Homer we can manually set the ppf value to
6 in MNE.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">raw_h</span> <span class="o">=</span> <a href="https://mne.tools/stable/generated/mne.preprocessing.nirs.beer_lambert_law.html#mne.preprocessing.nirs.beer_lambert_law" title="mne.preprocessing.nirs.beer_lambert_law" class="sphx-glr-backref-module-mne-preprocessing-nirs sphx-glr-backref-type-py-function"><span class="n">beer_lambert_law</span></a><span class="p">(</span><span class="n">corrected_tddr</span><span class="p">,</span> <span class="n">ppf</span><span class="o">=</span><span class="mf">6.</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="further-analysis-details">
<h2>Further analysis details<a class="headerlink" href="#further-analysis-details" title="Permalink to this heading">#</a></h2>
<p>Commonly this preprocessing is followed by an averaging analysis as described
in the <a class="reference external" href="https://mne.tools/stable/auto_tutorials/preprocessing/70_fnirs_processing.html#tut-fnirs-processing" title="(in MNE v1.1)"><span class="xref std std-ref">MNE fNIRS tutorial</span></a>.
If there is useful processing in the Homer
that is not available in MNE
please let us know by creating an issue at
<a class="reference external" href="https://github.com/mne-tools/mne-nirs/issues">https://github.com/mne-tools/mne-nirs/issues</a></p>
<p class="sphx-glr-timing"><strong>Total running time of the script:</strong> ( 0 minutes  2.303 seconds)</p>
<p><strong>Estimated memory usage:</strong>  9 MB</p>
<div class="sphx-glr-footer sphx-glr-footer-example docutils container" id="sphx-glr-download-auto-examples-migration-plot-01-homer-py">
<div class="binder-badge docutils container">
<a class="reference external image-reference" href="https://mybinder.org/v2/gh/mne-tools/mne-nirs/gh-pages?filepath=notebooks/auto_examples/migration/plot_01_homer.ipynb"><img alt="Launch binder" src="../../_images/binder_badge_logo1.svg" width="150px" /></a>
</div>
<div class="sphx-glr-download sphx-glr-download-python docutils container">
<p><a class="reference download internal" download="" href="../../_downloads/866042570f5904f93bc56723c37f3d28/plot_01_homer.py"><code class="xref download docutils literal notranslate"><span class="pre">Download</span> <span class="pre">Python</span> <span class="pre">source</span> <span class="pre">code:</span> <span class="pre">plot_01_homer.py</span></code></a></p>
</div>
<div class="sphx-glr-download sphx-glr-download-jupyter docutils container">
<p><a class="reference download internal" download="" href="../../_downloads/73981379dbdd2f0ebe5e101b77bb7e92/plot_01_homer.ipynb"><code class="xref download docutils literal notranslate"><span class="pre">Download</span> <span class="pre">Jupyter</span> <span class="pre">notebook:</span> <span class="pre">plot_01_homer.ipynb</span></code></a></p>
</div>
</div>
<p class="sphx-glr-signature"><a class="reference external" href="https://sphinx-gallery.github.io">Gallery generated by Sphinx-Gallery</a></p>
</section>
</section>


            </article>
            
            
            
            <footer class="bd-footer-article">
                <!-- Previous / next buttons -->
<div class='prev-next-area'>
  <a class='left-prev' id="prev-link" href="index.html" title="previous page">
      <i class="fas fa-angle-left"></i>
      <div class="prev-next-info">
          <p class="prev-next-subtitle">previous</p>
          <p class="prev-next-title">Migrating from other software packages</p>
      </div>
  </a>
  <a class='right-next' id="next-link" href="plot_02_nirstoolbox.html" title="next page">
  <div class="prev-next-info">
      <p class="prev-next-subtitle">next</p>
      <p class="prev-next-title">Migrating from nirs-toolbox to MNE</p>
  </div>
  <i class="fas fa-angle-right"></i>
  </a>
</div>
            </footer>
            
          </div>
          
          
          
            <div class="bd-sidebar-secondary bd-toc">
              
<div class="toc-item">
  
<div class="tocsection onthispage">
    <i class="fas fa-list"></i> On this page
</div>
<nav id="bd-toc-nav" class="page-toc">
    <ul class="visible nav section-nav flex-column">
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#">
   Migrating from Homer to MNE
  </a>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#basic-homer2-script-to-be-reproduced-in-mne">
   Basic Homer2 script to be reproduced in MNE
  </a>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#mne-equivalent-of-homer-script">
   MNE equivalent of Homer script
  </a>
  <ul class="visible nav section-nav flex-column">
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#convert-to-optical-density-and-motion-correct">
     Convert to optical density and motion correct
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#convert-signal-to-optical-density-and-apply-tddr">
     Convert signal to optical density and apply TDDR
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#convert-to-haemoglobin-concentration">
     Convert to haemoglobin concentration
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#further-analysis-details">
     Further analysis details
    </a>
   </li>
  </ul>
 </li>
</ul>

</nav>
</div>

<div class="toc-item">
  
</div>

<div class="toc-item">
  
</div>

            </div>
          
          
        </div>
        <footer class="bd-footer-content">
          <div class="bd-footer-content__inner">
            
          </div>
        </footer>
        
      </main>
    </div>
  </div>

  
    <script src="https://mne.tools/mne-nirs/versionwarning.js"></script>
    
    
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../../_static/scripts/pydata-sphinx-theme.js?digest=9b1a4fa89bdd0e95b23b"></script>

  <footer class="bd-footer"><div class="bd-footer__inner container">
  
  <div class="footer-item">
    
<p class="copyright">

    &copy; Copyright 2012–2022, MNE Developers. Last updated &lt;time datetime=&#34;2022-09-17T09:28:06.114719+00:00&#34; class=&#34;localized&#34;&gt;2022-09-17 09:28 UTC&lt;/time&gt;
&lt;script type=&#34;text/javascript&#34;&gt;$(function () { $(&#34;time.localized&#34;).each(function () { var el = $(this); el.text(new Date(el.attr(&#34;datetime&#34;)).toLocaleString([], {dateStyle: &#34;medium&#34;, timeStyle: &#34;long&#34;})); }); } )&lt;/script&gt;.<br>

</p>

  </div>
  
</div>
  </footer>
  </body>
</html>